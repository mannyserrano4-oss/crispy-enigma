<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rate Your Cut | Manny Serrano</title>

    <meta property="og:title" content="Rate Your Cut ‚ö°Ô∏è">
    <meta property="og:description" content="Click here to leave a quick rating. It helps me out!">
    <meta property="og:image" content="https://mannyserrano4-oss.github.io/crispy-enigma/gitpp.png">
    <meta property="og:type" content="website">
    
    <link rel="apple-touch-icon" href="icon.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#7c3aed">
    
    <link rel="icon" type="image/png" href="icon.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(-45deg, #e9d5ff, #f5d0fe, #c4b5fd, #a78bfa);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        .star-btn {
            transition: transform 0.2s, color 0.2s;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent; /* Removes blue tap box on iPhone */
        }
        .star-btn:hover { transform: scale(1.2); }
        
        /* Animation for when stars are clicked */
        @keyframes pop { 0% { transform: scale(1); } 50% { transform: scale(1.4); } 100% { transform: scale(1); } }
        .pop-anim { animation: pop 0.3s ease-in-out; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4 text-gray-800">

    <div class="w-full max-w-md bg-white/90 backdrop-blur-md rounded-2xl shadow-2xl overflow-hidden border border-white/50 mb-6 p-8 text-center">
        
        <img src="icon.png" alt="Manny" class="w-24 h-24 rounded-full mx-auto mb-4 border-4 border-white shadow-lg object-cover">
        
        <h1 id="mainTitle" class="text-2xl font-bold text-violet-900 mb-2 transition-all duration-300">How did I do?</h1>
        <p class="text-sm text-gray-600 mb-8">Your feedback helps me sharpen my skills (and my clippers).</p>

        <div class="flex justify-center gap-2 mb-8" id="starContainer">
            <i class="fa-solid fa-star text-4xl text-gray-300 star-btn" data-value="1" onclick="handleRate(1)"></i>
            <i class="fa-solid fa-star text-4xl text-gray-300 star-btn" data-value="2" onclick="handleRate(2)"></i>
            <i class="fa-solid fa-star text-4xl text-gray-300 star-btn" data-value="3" onclick="handleRate(3)"></i>
            <i class="fa-solid fa-star text-4xl text-gray-300 star-btn" data-value="4" onclick="handleRate(4)"></i>
            <i class="fa-solid fa-star text-4xl text-gray-300 star-btn" data-value="5" onclick="handleRate(5)"></i>
        </div>

        <p id="helperText" class="text-xs text-violet-600 font-bold h-4 transition-opacity opacity-0 uppercase tracking-widest">
            Select a rating...
        </p>

        <div class="text-center mt-8 pt-6 border-t border-violet-100">
            <a href="https://mannyserrano4-oss.github.io/crispy-enigma/" class="text-sm text-violet-500 hover:text-violet-700 font-semibold transition-colors">
                &larr; Back to Manny's Page
            </a>
        </div>
    </div>

    <div class="text-center mt-12 mb-6">
    
        <p class="text-xs text-violet-900 font-bold opacity-80 mb-1">
            &copy; <span id="year">2025</span> Manny Serrano.
        </p>
        <script>
            document.getElementById("year").textContent = new Date().getFullYear();
        </script>
    
        <p class="text-[10px] text-violet-800 opacity-60 italic">
            My mom says I cut pretty well...
        </p>
    </div>

<script>
        // ==========================================
        //         THE SWITCHBOARD SETTINGS
        // ==========================================
        
        const REVIEW_MODE = "text";   // OPTIONS: "text" OR "google"
        const YOUR_PHONE = "9014437338"; 
        const GOOGLE_LINK = ""; // Paste your link here later!

        // ==========================================

        const stars = document.querySelectorAll('.star-btn');
        const helperText = document.getElementById('helperText');
        const mainTitle = document.getElementById('mainTitle');
        let hasRated = false; // Prevents double-clicking

        // Star Hover Effects (Desktop Only)
        stars.forEach(star => {
            star.addEventListener('mouseenter', () => {
                if(hasRated) return; // Stop hovering if they already clicked
                const val = star.getAttribute('data-value');
                highlightStars(val);
                updateHelper(val);
            });
        });

        document.getElementById('starContainer').addEventListener('mouseleave', () => {
            if(hasRated) return; // Keep the stars lit if they clicked
            highlightStars(0);
            helperText.style.opacity = '0';
        });

        function updateHelper(val) {
            helperText.style.opacity = '1';
            
            // === MANNY'S COMEDY LABELS ===
            const texts = [
                "", 
                "I want a refund üò≠",       // 1 Star
                "My mom cuts better ‚úÇÔ∏è",  // 2 Stars
                "It was decent ü§∑‚Äç‚ôÇÔ∏è",        // 3 Stars
                "Clean & Crispy üßº",        // 4 Stars
                "ZERO NOTES ‚ö°Ô∏è"         // 5 Stars
            ];
            helperText.innerText = texts[val];
        }

        function highlightStars(count) {
            stars.forEach(star => {
                const val = star.getAttribute('data-value');
                if (val <= count) {
                    star.classList.remove('text-gray-300');
                    star.classList.add('text-yellow-400');
                } else {
                    star.classList.remove('text-yellow-400');
                    star.classList.add('text-gray-300');
                }
            });
        }

        function handleRate(rating) {
            if(hasRated) return; // Stop them from clicking twice
            hasRated = true;

            // 1. Force the UI to update immediately (Fix for Mobile)
            highlightStars(rating);
            updateHelper(rating); // Show the funny text!
            
            // 2. Visual Pop Animation
            stars[rating-1].classList.add('pop-anim');
            setTimeout(() => stars[rating-1].classList.remove('pop-anim'), 300);

            // 3. Update Title to show processing
            mainTitle.innerText = "Redirecting...";
            mainTitle.classList.add("text-violet-500", "animate-pulse");

            // 4. Logic Engine (Delayed so they can read the funny text)
            setTimeout(() => {
                if (rating == 5) {
                    // 5 STARS: Hype Mode
                    
                    // Safety Check: Only go to Google if a link actually exists
                    if (REVIEW_MODE === "google" && GOOGLE_LINK !== "") {
                        window.location.href = GOOGLE_LINK;
                    } else {
                        // If no link or mode is "text", fall back to SMS
                        sendText(""); 
                    }
                    
                } else {
                    // 1-4 STARS: Feedback Mode (Always SMS)
                    sendText("(Feedback) ");
                }
                
            }, 1000); // 1 Second delay so they see "ZERO NOTES ‚ö°Ô∏è"
        }

        function sendText(msg) {
            const sep = navigator.userAgent.match(/iPhone|iPad|iPod/i) ? '&' : '?';
            // If it's a 5-star, we send a blank text so they can write whatever they want
            if(msg === "") {
                window.location.href = `sms:${YOUR_PHONE}`;
            } else {
                window.location.href = `sms:${YOUR_PHONE}${sep}body=${encodeURIComponent(msg)}`;
            }
        }
    </script>
</body>
</html>
